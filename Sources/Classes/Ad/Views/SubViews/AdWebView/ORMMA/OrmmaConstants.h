//
//  OrmmaConstants.h
//  AdMobileSDK
//
//  Created by Constantine Mureev on 8/29/11.
//

#define ORMMA_PLACEHOLDER @"<!-- ORMMA_PLACEHOLDER -->"

#define ORMMA_JS @"window.init_ormmaview=function(){var a=window.ormmaview={},j={width:100,height:100,useCustomClose:!1,isModal:!1,lockOrientation:!1,useBackground:!1,backgroundColor:\"#ffffff\",backgroundOpacity:1},c={},i=[],p=!1,n=!1;a.fireAssetReadyEvent=function(a,g){var e=c.assetReady;if(e!=null)for(var h=0;h<e.length;h++)e[h](a,g);return\"OK\"};a.fireAssetRemovedEvent=function(a){var g=c.assetRemoved;if(g!=null)for(var e=0;e<g.length;e++)g[e](a);return\"OK\"};a.fireAssetRetiredEvent=function(a){var g=c.assetRetired; if(g!=null)for(var e=0;e<g.length;e++)g[e](a);return\"OK\"};a.fireChangeEvent=function(a){var g=c.change;if(g!=null)for(var e=0;e<g.length;e++)g[e](a);return\"OK\"};a.fireErrorEvent=function(a,g){var e=c.error;if(e!=null)for(var h=0;h<e.length;h++)e[h](a,g);return\"OK\"};a.fireShakeEvent=function(){var a=c.shake;if(a!=null)for(var g=0;g<a.length;g++)a[g]();return\"OK\"};a.fireResponseEvent=function(a,g){var e=c.response;if(e!=null)for(var h=0;h<e.length;h++)e[h](a,g);return\"OK\"};a.nativeCallComplete=function(){if(i.length== 0)p=!1;else{var a=i.pop();window.location=a;return\"OK\"}};a.showAlert=function(a){alert(a)};a.zeroPad=function(a){var g=\"\";a<10&&(g+=\"0\");g+=a;return g};a.executeNativeCall=function(a){for(var g=\"ormma://\"+a,c,h=!0,j=1;j<arguments.length;j+=2)c=arguments[j+1],c!=null&&(h?(g+=\"?\",h=!1):g+=\"&\",g+=arguments[j]+\"=\"+escape(c));p||!n?i.push(g):(p=!0,window.location=g)};a.activate=function(a){this.executeNativeCall(\"service\",\"name\",a,\"enabled\",\"Y\")};a.addEventListener=function(a,g){var e=c[a];e==null&&(c[a]= [],e=c[a]);for(var h in e)if(g==h)return;e.push(g)};a.deactivate=function(a){this.executeNativeCall(\"service\",\"name\",a,\"enabled\",\"N\")};a.removeEventListener=function(a,g){var e=c[a];e!=null&&e.remove(g)};a.close=function(){this.executeNativeCall(\"close\")};a.expand=function(a){this.executeNativeCall(\"expand\",\"url\",a,\"width\",j.width,\"height\",j.height,\"useCustomClose\",j.useCustomClose,\"isModal\",j.isModal,\"useBackground\",j.useBackground,\"backgroundColor\",j.backgroundColor,\"backgroundOpacity\",j.backgroundOpacity, \"lockOrientation\",j.lockOrientation)};a.hide=function(){this.executeNativeCall(\"hide\")};a.open=function(a){this.executeNativeCall(\"open\",\"url\",a)};a.openMap=function(a,c){this.executeNativeCall(\"openMap\",\"url\",a,\"fullscreen\",c)};a.resize=function(a,c){this.executeNativeCall(\"resize\",\"w\",a,\"h\",c)};a.getExpandProperties=function(){return j};a.setExpandProperties=function(a){var c=\"width,height,useCustomClose,isModal,lockOrientation,useBackground,backgroundColor,backgroundOpacity\".split(\",\");for(f in c){var e= c[f];a[e]!==void 0&&(j[e]=a[e])}};a.show=function(){this.executeNativeCall(\"show\")};a.storePicture=function(a){this.executeNativeCall(\"storePicture\",\"url\",a)};a.useCustomClose=function(a){j.useCustomClose=a};a.playAudio=function(a,c){var e=\"this.executeNativeCall( 'playAudio'\";e+=\", 'url', '\"+a+\"'\";c!=null&&(e+=typeof c.autoplay!=\"undefined\"&&c.autoplay!=null?\", 'autoplay', 'Y'\":\", 'autoplay', 'N'\",e+=typeof c.controls!=\"undefined\"&&c.controls!=null?\", 'controls', 'Y'\":\", 'controls', 'N'\",e+=typeof c.loop!= \"undefined\"&&c.loop!=null?\", 'loop', 'Y'\":\", 'loop', 'N'\",e+=typeof c.position!=\"undefined\"&&c.position!=null?\", 'position', 'Y'\":\", 'position', 'N'\",e+=typeof c.startStyle!=\"undefined\"&&c.startStyle!=null?\", 'startStyle', '\"+c.startStyle+\"'\":\", 'startStyle', 'normal'\",e+=typeof c.stopStyle!=\"undefined\"&&c.stopStyle!=null?\", 'stopStyle', '\"+c.stopStyle+\"'\":\", 'stopStyle', 'normal'\");e+=\" );\";eval(e)};a.playVideo=function(a,c){var e=\"this.executeNativeCall( 'playVideo'\";e+=\", 'url', '\"+a+\"'\";c!=null&& (e+=typeof c.audio!=\"undefined\"&&c.audio!=null?\", 'audioMuted', 'Y'\":\", 'audioMuted', 'N'\",e+=typeof c.autoplay!=\"undefined\"&&c.autoplay!=null?\", 'autoplay', 'Y'\":\", 'autoplay', 'N'\",e+=typeof c.controls!=\"undefined\"&&c.controls!=null?\", 'controls', 'Y'\":\", 'controls', 'N'\",e+=typeof c.loop!=\"undefined\"&&c.loop!=null?\", 'loop', 'Y'\":\", 'loop', 'N'\",typeof c.position!=\"undefined\"&&c.position!=null&&(e+=\", 'position_top', '\"+c.position.top+\"'\",e+=\", 'position_left', '\"+c.position.left+\"'\",typeof c.width!= \"undefined\"&&c.width!=null&&(e+=\", 'position_width', '\"+c.width+\"'\"),typeof c.height!=\"undefined\"&&c.height!=null&&(e+=\", 'position_height', '\"+c.height+\"'\")),e+=typeof c.startStyle!=\"undefined\"&&c.startStyle!=null?\", 'startStyle', '\"+c.startStyle+\"'\":\", 'startStyle', 'normal'\",e+=typeof c.stopStyle!=\"undefined\"&&c.stopStyle!=null?\", 'stopStyle', '\"+c.stopStyle+\"'\":\", 'stopStyle', 'normal'\");e+=\" );\";eval(e)};a.createEvent=function(c,a,e){var h=c.getFullYear(),i=c.getMonth()+1,j=c.getDate(),n=c.getHours(), c=c.getMinutes();this.executeNativeCall(\"calendar\",\"date\",h+this.zeroPad(i)+this.zeroPad(j)+this.zeroPad(n)+this.zeroPad(c),\"title\",a,\"body\",e)};a.makeCall=function(c){this.executeNativeCall(\"phone\",\"number\",c)};a.sendMail=function(c,a,e){this.executeNativeCall(\"email\",\"to\",c,\"subject\",a,\"body\",e,\"html\",\"N\")};a.sendSMS=function(c,a){this.executeNativeCall(\"sms\",\"to\",c,\"body\",a)};a.setShakeProperties=function(){};a.addAsset=function(c,a){this.executeNativeCall(\"addasset\",\"uri\",url,\"alias\",a)};a.request= function(c,a){this.executeNativeCall(\"request\",\"uri\",c,\"display\",a)};a.removeAsset=function(c){this.executeNativeCall(\"removeasset\",\"alias\",c)};document.addEventListener(\"DOMContentLoaded\",function(){n=!0;this.nativeCallComplete()})};window.ormmaview||window.init_ormmaview();window.init_ormma=function(){var a=window.ormma={},j=a.STATES={UNKNOWN:\"unknown\",DEFAULT:\"default\",RESIZED:\"resized\",EXPANDED:\"expanded\",HIDDEN:\"hidden\"},c=a.EVENTS={ASSETREADY:\"assetReady\",ASSETREMOVED:\"assetRemoved\",ASSETRETIRED:\"assetRetired\",ERROR:\"error\",INFO:\"info\",HEADINGCHANGE:\"headingChange\",KEYBOARDCHANGE:\"keyboardChange\",LOCATIONCHANGE:\"locationChange\",NETWORKCHANGE:\"networkChange\",ORIENTATIONCHANGE:\"orientationChange\",READY:\"ready\",RESPONSE:\"response\",SCREENCHANGE:\"screenChange\",SHAKE:\"shake\", SIZECHANGE:\"sizeChange\",STATECHANGE:\"stateChange\",TILTCHANGE:\"tiltChange\",VIEWABLECHANGE:\"viewableChange\"};a.CONTROLS={BACK:\"back\",FORWARD:\"forward\",REFRESH:\"refresh\",ALL:\"all\"};var i=a.FEATURES={LEVEL1:\"level-1\",LEVEL2:\"level-2\",LEVEL3:\"level-3\",SCREEN:\"screen\",ORIENTATION:\"orientation\",HEADING:\"heading\",LOCATION:\"location\",SHAKE:\"shake\",TILT:\"tilt\",NETWORK:\"network\",SMS:\"sms\",PHONE:\"phone\",EMAIL:\"email\",CALENDAR:\"calendar\",CAMERA:\"camera\",AUDIO:\"audio\",VIDEO:\"video\",MAP:\"map\"},p=a.NETWORK={OFFLINE:\"offline\", WIFI:\"wifi\",CELL:\"cell\",UNKNOWN:\"unknown\"},n=j.UNKNOWN,u={width:0,height:0},g={x:0,y:0,width:0,height:0},e={width:0,height:0},h={\"level-1\":!0,\"level-2\":!0,\"level-3\":!0,screen:!0,orientation:!0,heading:!0,location:!0,shake:!0,tilt:!0,network:!0,sms:!0,phone:!0,email:!0,calendar:!0,camera:!0,audio:!0,video:!0,map:!0},w=-1,x=!1,q=null,s=p.UNKNOWN,y=-1,A=\"inline\",t=null,v={interval:10,intensity:20},r=null,m={},B=-1,z=!1,E={width:function(b){return!isNaN(b)&&b>0},height:function(b){return!isNaN(b)&&b> 0},useCustomClose:function(b){return b===!0||b===!1},isModal:function(b){return b===!0||b===!1},lockOrientation:function(b){return b===!0||b===!1},useBackground:function(b){return b===!0||b===!1},backgroundColor:function(b){return typeof b==\"string\"&&b.substr(0,1)==\"#\"&&!isNaN(parseInt(b.substr(1),16))},backgroundOpacity:function(b){return!isNaN(b)&&b>=0&&b<=1}},F={intensity:function(b){return!isNaN(b)},interval:function(b){return!isNaN(b)}},G={state:function(b){d(c.INFO,\"setting state to \"+k(b)); n=b;d(c.STATECHANGE,n)},size:function(b){d(c.INFO,\"setting size to \"+k(b));u=b;d(c.SIZECHANGE,u.width,u.height)},defaultPosition:function(b){d(c.INFO,\"setting default position to \"+k(b));g=b},maxSize:function(b){d(c.INFO,\"setting maxSize to \"+k(b));e=b},expandProperties:function(b){d(c.INFO,\"merging expandProperties with \"+k(b));for(var a in b)expandProperties[a]=b[a]},supports:function(b){d(c.INFO,\"setting supports to \"+k(b));h={};for(var a in i)h[i[a]]=C(i[a],b)},heading:function(b){d(c.INFO,\"setting heading to \"+ k(b));w=b;d(c.HEADINGCHANGE,w)},keyboardState:function(b){d(c.INFO,\"setting keyboardState to \"+k(b));x=b;d(c.KEYBOARDCHANGE,x)},location:function(b){d(c.INFO,\"setting location to \"+k(b));q=b;d(c.LOCATIONCHANGE,q.lat,q.lon,q.acc)},network:function(b){d(c.INFO,\"setting network to \"+k(b));s=b;d(c.NETWORKCHANGE,s!=p.OFFLINE&&s!=p.UNKNOWN,s)},orientation:function(b){d(c.INFO,\"setting orientation to \"+k(b));y=b;d(c.ORIENTATIONCHANGE,y)},placementType:function(b){d(c.INFO,\"setting placementType to \"+k(b)); A=b},screenSize:function(b){d(c.INFO,\"setting screenSize to \"+k(b));t=b;d(c.SCREENCHANGE,t.width,t.height)},shakeProperties:function(b){d(c.INFO,\"setting shakeProperties to \"+k(b));v=b},tilt:function(b){d(c.INFO,\"setting tilt to \"+k(b));r=b;d(c.TILTCHANGE,r.x,r.y,r.z)},cacheRemaining:function(b){d(c.INFO,\"setting cacheRemaining to \"+k(b));B=b},viewable:function(b){d(c.INFO,\"setting viewable to \"+k(b));z=b;d(c.VIEWABLECHANGE,b)}},l={},H=function(b){this.event=b;this.count=0;var c={};this.add=function(a){var d= String(a);c[d]||(c[d]=a,this.count++,this.count==1&&ormmaview.activate(b))};this.remove=function(a){a=String(a);return c[a]?(c[a]=null,delete c[a],this.count--,this.count==0&&ormmaview.deactivate(b),!0):!1};this.removeAll=function(){for(var b in c)this.remove(c[b])};this.broadcast=function(b){for(var a in c)c[a].apply({},b)};this.toString=function(){var a=[b,\":\"],d;for(d in c)a.push(\"|\",d,\"|\");return a.join(\"\")}};ormmaview.addEventListener(\"change\",function(b){for(var c in b)(0,G[c])(b[c])});ormmaview.addEventListener(\"shake\", function(){d(c.SHAKE)});ormmaview.addEventListener(\"error\",function(b,a){d(c.ERROR,b,a)});ormmaview.addEventListener(\"response\",function(b,a){d(c.RESPONSE,b,a)});ormmaview.addEventListener(\"assetReady\",function(b,a){m[b]=a;d(c.ASSETREADY,b)});ormmaview.addEventListener(\"assetRemoved\",function(b){m[b]=null;delete m[b];d(c.ASSETREMOVED,b)});ormmaview.addEventListener(\"assetRetired\",function(b){m[b]=null;delete m[b];d(c.ASSETRETIRED,b)});var o=function(b){var c=function(){};c.prototype=b;return new c}, k=function(b){if(typeof b==\"object\")if(b.push){var c=[],a;for(a in b)c.push(b[a]);return\"[\"+c.join(\",\")+\"]\"}else{c=[];for(a in b)c.push(\"'\"+a+\"':\"+b[a]);return\"{\"+c.join(\",\")+\"}\"}else return String(b)},D=function(b,a,e,h){if(h)if(b===void 0)return d(c.ERROR,\"Required object missing.\",e),!1;else for(var g in a)if(b[g]===void 0)return d(c.ERROR,\"Object missing required property \"+g,e),!1;for(g in b)if(a[g]){if(!a[g](b[g]))return d(c.ERROR,\"Value of property \"+g+\" is not valid type.\",e),!1}else return d(c.ERROR, \"Invalid property specified - \"+g+\".\",e),!1;return!0},C=function(b,c){for(var a in c)if(c[a]==b)return!0;return!1},d=function(){for(var b=Array(arguments.length),c=0;c<arguments.length;c++)b[c]=arguments[c];c=b.shift();l[c]&&l[c].broadcast(b)};a.signalReady=function(){window.ORMMAReady&&ORMMAReady();d(c.READY);d(c.INFO,\"callback invoked\")};a.addEventListener=function(b,a){!b||!a?d(c.ERROR,\"Both event and listener are required.\",\"addEventListener\"):C(b,c)?(l[b]||(l[b]=new H(b)),l[b].add(a)):d(c.ERROR, \"Unknown event: \"+b,\"addEventListener\")};a.close=function(){ormmaview.close()};a.expand=function(b){ormmaview.expand(b)};a.getDefaultPosition=function(){return o(g)};a.getExpandProperties=function(){return o(ormmaview.getExpandProperties())};a.getMaxSize=function(){return o(e)};a.getSize=function(){return o(u)};a.getState=function(){return n};a.hide=function(){n==j.HIDDEN?d(c.ERROR,\"Ad is currently hidden.\",\"hide\"):ormmaview.hide()};a.isViewable=function(){return z};a.open=function(b){b?ormmaview.open(b): d(c.ERROR,\"URL is required.\",\"open\")};a.openMap=function(b,a){b?ormmaview.openMap(b,a):d(c.ERROR,\"POI is required.\",\"openMap\")};a.removeEventListener=function(b,a){b?a&&(!l[b]||!l[b].remove(a))?d(c.ERROR,\"Listener not currently registered for event\",\"removeEventListener\"):(l[b]&&l[b].removeAll(),l[b]&&l[b].count==0&&(l[b]=null,delete l[b])):d(c.ERROR,\"Must specify an event.\",\"removeEventListener\")};a.resize=function(b,a){b==null||a==null||isNaN(b)||isNaN(a)||b<0||a<0?d(c.ERROR,\"Requested size must be numeric values between 0 and maxSize.\", \"resize\"):b>e.width||a>e.height?d(c.ERROR,\"Request (\"+b+\" x \"+a+\") exceeds maximum allowable size of (\"+e.width+\" x \"+e.height+\")\",\"resize\"):ormmaview.resize(b,a)};a.setExpandProperties=function(b){D(b,E,\"setExpandProperties\")&&ormmaview.setExpandProperties(b)};a.show=function(){n!=j.HIDDEN?d(c.ERROR,\"Ad is currently visible.\",\"show\"):ormmaview.show()};a.playAudio=function(b,a){h[i.AUDIO]?!b||typeof b!=\"string\"?d(c.ERROR,\"Request must specify a URL\",\"playAudio\"):ormmaview.playAudio(b,a):d(c.ERROR, \"Method not supported by this client.\",\"playAudio\")};a.playVideo=function(b,a){h[i.VIDEO]?!b||typeof b!=\"string\"?d(c.ERROR,\"Request must specify a URL\",\"playVideo\"):ormmaview.playVideo(b,a):d(c.ERROR,\"Method not supported by this client.\",\"playVideo\")};a.createEvent=function(b,a,e){a=a.replace(/^\\s+|\\s+$/g,\"\");e=e.replace(/^\\s+|\\s+$/g,\"\");h[i.CALENDAR]?!b||typeof b!=\"object\"||!b.getDate?d(c.ERROR,\"Valid date required.\",\"createEvent\"):!a||typeof a!=\"string\"||a.length==0?d(c.ERROR,\"Valid title required.\", \"createEvent\"):!e||typeof e!=\"string\"||e.length==0?d(c.ERROR,\"Valid body required.\",\"createEvent\"):ormmaview.createEvent(b,a,e):d(c.ERROR,\"Method not supported by this client.\",\"createEvent\")};a.getHeading=function(){h[i.HEADING]||d(c.ERROR,\"Method not supported by this client.\",\"getHeading\");return w};a.getKeyboardState=function(){h[i.LEVEL2]||d(c.ERROR,\"Method not supported by this client.\",\"getKeyboardState\");return x};a.getLocation=function(){h[i.LOCATION]||d(c.ERROR,\"Method not supported by this client.\", \"getLocation\");return null==q?null:o(q)};a.getNetwork=function(){h[i.NETWORK]||d(c.ERROR,\"Method not supported by this client.\",\"getNetwork\");return s};a.getOrientation=function(){h[i.ORIENTATION]||d(c.ERROR,\"Method not supported by this client.\",\"getOrientation\");return y};a.getPlacementType=function(){return A};a.getScreenSize=function(){if(h[i.SCREEN])return null==t?null:o(t);else d(c.ERROR,\"Method not supported by this client.\",\"getScreenSize\")};a.getShakeProperties=function(){if(h[i.SHAKE])return null== v?null:o(v);else d(c.ERROR,\"Method not supported by this client.\",\"getShakeProperties\")};a.getTilt=function(){if(h[i.TILT])return null==r?null:o(r);else d(c.ERROR,\"Method not supported by this client.\",\"getTilt\")};a.getVersion=function(){return\"1.1.0\"};a.makeCall=function(b){h[i.PHONE]?!b||typeof b!=\"string\"?d(c.ERROR,\"Request must provide a number to call.\",\"makeCall\"):ormmaview.makeCall(b):d(c.ERROR,\"Method not supported by this client.\",\"makeCall\")};a.sendMail=function(b,a,e){h[i.EMAIL]?!b||typeof b!= \"string\"?d(c.ERROR,\"Request must specify a recipient.\",\"sendMail\"):ormmaview.sendMail(b,a,e):d(c.ERROR,\"Method not supported by this client.\",\"sendMail\")};a.sendSMS=function(b,a){h[i.SMS]?!b||typeof b!=\"string\"?d(c.ERROR,\"Request must specify a recipient.\",\"sendSMS\"):ormmaview.sendSMS(b,a):d(c.ERROR,\"Method not supported by this client.\",\"sendSMS\")};a.setShakeProperties=function(b){h[i.SHAKE]?D(b,F,\"setShakeProperties\")&&(v=b,ormmaview.setShakeProperties(b)):d(c.ERROR,\"Method not supported by this client.\", \"setShakeProperties\")};a.storePicture=function(b){ormmaview.storePicture(b)};a.supports=function(b){return h[b]?!0:!1};a.useCustomClose=function(b){b===!0||b===!1?ormmaview.useCustomClose(b):d(c.ERROR,\"Flag must be boolean\",\"useCustomClose\")};a.addAsset=function(b,a){!b||!a||typeof b!=\"string\"||typeof a!=\"string\"?d(c.ERROR,\"URL and alias are required.\",\"addAsset\"):h[i.LEVEL3]?ormmaview.addAsset(b,a):b.indexOf(\"ormma://\")==0?d(c.ERROR,\"Native device assets not supported by this client.\",\"addAsset\"): (m[a]=b,d(c.ASSETREADY,a))};a.addAssets=function(b){for(var c in b)a.addAsset(b[c],c)};a.getAssetURL=function(b){m[b]||d(c.ERROR,\"Alias unknown.\",\"getAssetURL\");return m[b]};a.getCacheRemaining=function(){h[i.LEVEL3]||d(c.ERROR,\"Method not supported by this client.\",\"getCacheRemaining\");return B};a.request=function(b,a){h[i.LEVEL3]?!b||typeof b!=\"string\"?d(c.ERROR,\"URI is required.\",\"request\"):ormmaview.request(b,a):d(c.ERROR,\"Method not supported by this client.\",\"request\")};a.removeAllAssets=function(){for(var b in m)a.removeAsset(b)}; a.removeAsset=function(a){!a||typeof a!=\"string\"?d(c.ERROR,\"Alias is required.\",\"removeAsset\"):m[a]?h[i.LEVEL3]?ormmaview.removeAsset(a):(m[a]=null,delete m[a],d(c.ASSETREMOVED,a)):d(c.ERROR,\"Alias unknown.\",\"removeAsset\")};a.getViewable=function(){return z}};window.ormma||window.init_ormma();window.Ormma=window.ormma;window.mraid=window.ormma;"
